<div class="auth-page-container">
  
  <div class="auth-box">
    
    <div *ngIf="resetSuccess" class="success-message-box text-center">
      <h2>Sucesso! Senha Redefinida</h2>
      <p class="text-success mt-3">Sua senha foi atualizada com sucesso. Você será redirecionado para a tela de login em breve.</p>
      </div>

    <div *ngIf="!resetSuccess">
      
      <h2 class="mb-4">Defina sua nova senha</h2>

      <div *ngIf="errorMessage" class="alert alert-danger error-message" role="alert">
          {{ errorMessage }}
      </div>

      <form (ngSubmit)="onSubmit()" *ngIf="token && !errorMessage">
        
        <div class="form-group mb-3">
          <label for="newPassword">Nova Senha</label>
          <input 
            type="password" 
            id="newPassword" 
            [(ngModel)]="newPassword" 
            name="newPassword" 
            class="form-control"
            placeholder="Mínimo 8 caracteres"
            required
          >
          <small *ngIf="newPassword.length > 0 && newPassword.length < 8" class="text-danger">
            A senha deve ter no mínimo 8 caracteres.
          </small>
        </div>

        <div class="form-group mb-4">
          <label for="confirmPassword">Confirmar Nova Senha</label>
          <input 
            type="password" 
            id="confirmPassword" 
            [(ngModel)]="confirmPassword" 
            name="confirmPassword" 
            class="form-control"
            required
          >
          <small *ngIf="newPassword !== confirmPassword && confirmPassword.length > 0" class="text-danger">
            As senhas não coincidem.
          </small>
        </div>

        <button 
          type="submit" 
          class="btn btn-primary btn-block btn-lg" 
          [disabled]="loading || newPassword !== confirmPassword || newPassword.length < 8"
        >
          <span *ngIf="!loading">Redefinir Senha</span>
          <span *ngIf="loading">Redefinindo...</span>
        </button>
      </form>
      
      <div class="link-footer mt-4">
          <a [routerLink]="['/auth/forgot-password']">Lembrou da senha? Voltar ao Login.</a>
      </div>
      
      <div *ngIf="!token" class="alert alert-warning mt-4 text-left">
         Token de redefinição ausente na URL. Por favor, solicite um novo link.
      </div>
      
    </div>
  </div>
</div>