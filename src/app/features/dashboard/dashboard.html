<div class="dashboard-wrapper">
  <div class="container-fluid p-3 p-md-4">
    
    <div class="mb-4">
      <h2 class="fw-bold h4 h2-md">
        Bem-vindo de volta, {{ primeiroNome || 'Estudante' }}! ðŸ‘‹
      </h2>
      <p class="text-muted small">Aqui estÃ¡ seu resumo de estudos</p>
    </div>

    <div class="row g-3 mb-4">
      <div class="col-12 col-md-6 col-xl-4">
        <div class="card stat-card h-100 shadow-sm border-0">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1 small">QuestÃµes Resolvidas</p>
              <h3 class="fw-bold mb-1">{{ totalResolvidas }}</h3>
              <small class="text-muted">Total geral</small>
            </div>
            <div class="stat-icon bg-primary-light text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                <path d="m10.97 4.97-.02.022-3.473 4.425-2.093-2.094a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-1.071-1.05z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-6 col-xl-4">
        <div class="card stat-card h-100 shadow-sm border-0">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1 small">Taxa de Acertos</p>
              <h3 class="fw-bold mb-1">{{ taxaAcertos }}%</h3>
              <small class="text-muted">MÃ©dia geral</small>
            </div>
            <div class="stat-icon bg-primary-light text-primary">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 16 16">
                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
                <path d="M8 13A5 5 0 1 1 8 3a5 5 0 0 1 0 10m0 1A6 6 0 1 0 8 2a6 6 0 0 0 0 12"/>
                <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8"/>
                <path d="M9.5 8a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-12 col-xl-4">
        <div class="card stat-card h-100 shadow-sm border-0">
          <div class="card-body d-flex justify-content-between align-items-center">
            <div>
              <p class="text-muted mb-1 small">Dias Seguidos</p>
              <h3 class="fw-bold mb-1">{{ usuario?.streakAtual || 0 }}</h3>
              <small class="text-muted">{{ streak > 0 ? 'Continue assim! ðŸ”¥' : 'Comece hoje! ðŸš€' }}</small>
            </div>
            <div class="stat-icon bg-primary-light text-primary">
              <img src="flame-fire.svg" alt="Fogo" style="width: 24px;">
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-4 mb-4">
      <div class="col-12 col-xl-6">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body">
            <h5 class="fw-bold mb-4 small text-muted text-uppercase">Desempenho das 5 matÃ©rias com maior atividade</h5>
            <div class="chart-container">
              <canvas baseChart
                [data]="barChartData"
                [options]="barChartOptions"
                [type]="barChartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-xl-6">
        <div class="card shadow-sm border-0 h-100">
          <div class="card-body">
            <h5 class="fw-bold mb-4 small text-muted text-uppercase">EvoluÃ§Ã£o Semanal</h5>
            <div class="chart-container">
              <canvas baseChart
                [data]="lineChartData"
                [options]="lineChartOptions" 
                [type]="lineChartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row mb-4" *ngIf="!usuario?.premium">
      <div class="col-12">
        <div class="card premium-upsell-card border-0 shadow-sm overflow-hidden">
          <div class="card-body p-4 d-flex flex-column flex-md-row align-items-center justify-content-between">
            <div class="d-flex align-items-center gap-4">
              <div class="upsell-icon-box shadow-glow-sm">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"></path>
                  <path d="M5 20h14"></path>
                </svg>
              </div>
              <div>
                <h4 class="fw-bold mb-1" style="color: #1e1b4b;">Potencialize sua AprovaÃ§Ã£o ðŸš€</h4>
                <p class="text-muted mb-0 small">Tenha simulados ilimitados, modo de revisÃ£o espaÃ§ada e mapas de tendÃªncias por apenas <b>R$ 9,90/mÃªs</b>.</p>
              </div>
            </div>
            <div class="mt-3 mt-md-0">
              <a routerLink="/premium" class="btn btn-premium-upsell px-4 py-2 rounded-pill fw-bold">
                Conhecer o Premium
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>